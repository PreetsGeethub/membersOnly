<!DOCTYPE html>

<html>
<head>
  <title>Members Only Club</title>
</head>
<body>

  <h1>ğŸ  Members Only Club</h1>

<% if (user) { %> <h2>Welcome, <%= user.firstname %>!</h2>

```
<p>You are logged in.</p>

<a href="/join-club">Join the Club</a>
<br><br>

<a href="/messages/new">Create New Message</a>
<br><br>

<a href="/logout">Logout</a>
```

<% } else { %>

```
<h2>You are not logged in</h2>

<a href="/login">Login</a>
<br><br>

<a href="/sign-up">Sign Up</a>
```

<% } %>

  <hr>

  <h2>Club Messages</h2>

<% if (messages && messages.length > 0) { %>

```
<% messages.forEach(message => { %>

  <div style="border:1px solid black; padding:10px; margin:10px;">

    <h3><%= message.title %></h3>
    <p><%= message.text %></p>

    <!-- â­ Author visibility -->
    <% if (user && (user.membershipstatus === 'member' || user.isadmin)) { %>
      <p>By: <%= message.firstname %> <%= message.lastname %></p>
      <p>Date: <%= message.createdat %></p>
    <% } else { %>
      <p>By: Anonymous</p>
    <% } %>

    <!-- â­ Admin delete button -->
    <% if (user && user.isadmin) { %>
      <form action="/messages/<%= message.id %>/delete" method="POST">
        <button type="submit">Delete</button>
      </form>
    <% } %>

  </div>

<% }) %>
```

<% } else { %>

```
<p>No messages yet.</p>
```

<% } %>

</body>
</html>
